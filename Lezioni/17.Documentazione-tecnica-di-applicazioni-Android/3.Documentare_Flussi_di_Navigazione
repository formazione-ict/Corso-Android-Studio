# 3. Documentare Flussi di Navigazione

## 3.1 Navigation Graph Documentation
Documentare i flussi di navigazione dell'app è essenziale per comprendere l'architettura UI.

```
## Flusso di Navigazione

L'applicazione utilizza il **Navigation Component** di Jetpack per gestire
la navigazione tra schermate.

### Navigation Graph

```xml
<!-- res/navigation/nav_graph.xml -->
<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/nav_graph"
    app:startDestination="@id/splashFragment">

    <!-- Splash Screen: Schermata iniziale con logo animato -->
    <fragment
        android:id="@+id/splashFragment"
        android:name="com.example.weather.ui.splash.SplashFragment"
        android:label="Splash">
        <action
            android:id="@+id/action_splash_to_home"
            app:destination="@id/homeFragment"
            app:popUpTo="@id/splashFragment"
            app:popUpToInclusive="true"
            app:enterAnim="@anim/fade_in"
            app:exitAnim="@anim/fade_out" />
    </fragment>

    <!-- Home Screen: Schermata principale con previsioni -->
    <fragment
        android:id="@+id/homeFragment"
        android:name="com.example.weather.ui.home.HomeFragment"
        android:label="Meteo">
        
        <!-- Navigazione verso i dettagli della città -->
        <action
            android:id="@+id/action_home_to_details"
            app:destination="@id/detailsFragment"
            app:enterAnim="@anim/slide_in_right"
            app:exitAnim="@anim/slide_out_left"
            app:popEnterAnim="@anim/slide_in_left"
            app:popExitAnim="@anim/slide_out_right" />
        
        <!-- Navigazione verso le impostazioni -->
        <action
            android:id="@+id/action_home_to_settings"
            app:destination="@id/settingsFragment" />
        
        <!-- Navigazione verso ricerca località -->
        <action
            android:id="@+id/action_home_to_search"
            app:destination="@id/searchFragment" />
    </fragment>

    <!-- Details Screen: Dettagli previsioni città -->
    <fragment
        android:id="@+id/detailsFragment"
        android:name="com.example.weather.ui.details.DetailsFragment"
        android:label="Dettagli">
        
        <!-- Argomenti richiesti -->
        <argument
            android:name="cityId"
            app:argType="long"
            android:defaultValue="-1L" />
        <argument
            android:name="cityName"
            app:argType="string" />
    </fragment>

    <!-- Search Screen: Ricerca e aggiunta località -->
    <fragment
        android:id="@+id/searchFragment"
        android:name="com.example.weather.ui.search.SearchFragment"
        android:label="Cerca Città" />

    <!-- Settings Screen: Impostazioni applicazione -->
    <fragment
        android:id="@+id/settingsFragment"
        android:name="com.example.weather.ui.settings.SettingsFragment"
        android:label="Impostazioni" />

</navigation>
```

## Mappa Visuale dei Flussi


┌─────────────┐
│   Splash    │ (2 sec)
└──────┬──────┘
       │ automatic
       ▼
┌─────────────┐
│    Home     │◄──────────┐
│  (Start)    │           │
└──────┬──────┘           │
       │                  │
       ├─────────────┐    │
       │             │    │
       ▼             ▼    │
┌─────────────┐ ┌─────────────┐
│   Details   │ │   Search    │
│             │ │             │
└─────────────┘ └──────┬──────┘
                       │
                       └──────┘

       ┌─────────────┐
       │  Settings   │
       │   (Bottom   │
       │   NavView)  │
       └─────────────┘

## Descrizione Flussi
### Flusso Principale (Happy Path)
1.	Splash → Home: Avvio automatico dopo 2 secondi
2.	Home → Details: Click su città salvata mostra dettagli completi
3.	Home → Search: FAB "+" per aggiungere nuova località
4.	Search → Home: Località selezionata viene salvata e mostrata

### Flussi Secondari
-	Home → Settings: Menu hamburger o bottom nav
-	Settings → Home: Back button
-	Details → Home: Back button (animazione slide)
```

### 3.2 Documentazione Interazioni Utente

```markdown
## Interazioni Utente

### Gesture Supportate

#### Home Screen
- **Swipe Down**: Pull-to-refresh per aggiornare previsioni
- **Swipe Left/Right su card**: Elimina località dai preferiti
- **Click su card**: Naviga ai dettagli città
- **Long Press su card**: Mostra dialog opzioni (rinomina, elimina, sposta)
- **FAB Click**: Apre schermata ricerca

#### Details Screen
- **Scroll verticale**: Visualizza previsioni orarie e settimanali
- **Click su grafico**: Mostra tooltip con valori dettagliati
- **Swipe tra tab**: Cambia tra "Oggi", "Domani", "Settimana"

#### Search Screen
- **Type in SearchView**: Filtra risultati in tempo reale
- **Click risultato**: Aggiunge località e torna a Home
- **Click GPS icon**: Usa posizione corrente
```
